<!doctype html>
<html lang="ru">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Рейтинг со звёздами (частичное заполнение)</title>
<style>
  :root{
    --star-size: 36px;   /* размер одной звезды */
    --star-gap: 6px;     /* расстояние между звёздами */
    --stars: 5;
    --gold: #f6c94d;
    --gray: #d6d6d6;
  }

  .rating {
    position: relative;
    display: inline-block;
    /* ширина контейнера = количество звёзд * (size + gap) - gap */
    width: calc(var(--stars) * var(--star-size) + (var(--stars) - 1) * var(--star-gap));
    height: var(--star-size);
    user-select: none;
    vertical-align: middle;
    font-size: 0; /* убрать пробелы между inline-flex элементами */
  }

  /* общий стиль для наборов звёзд */
  .stars-row {
    display: flex;
    gap: var(--star-gap);
    align-items: center;
    height: 100%;
  }

  /* нижний серый ряд */
  .stars-row.gray {
    color: var(--gray);
  }

  /* верхний жёлтый ряд — поверх и обрезаем по ширине */
  .stars-row.gold {
    position: absolute;
    top: 0;
    left: 0;
    overflow: hidden; /* важная часть — резкий край */
    white-space: nowrap;
    color: var(--gold);
    pointer-events: none;
    height: 100%;
  }

  /* общие стили для svg звезды */
  .star {
    width: var(--star-size);
    height: var(--star-size);
    display: block;
    flex: 0 0 var(--star-size);
  }

  /* заливка конвертируется через currentColor, поэтому задаём fill:currentColor */
  .star path {
    fill: currentColor;
  }

  /* подпись/число рейтинга */
  .rating-value {
    display: inline-block;
    margin-left: 10px;
    vertical-align: middle;
    font-family: Arial, sans-serif;
    font-size: 16px;
    color: #333;
  }

  /* небольшой контрол для демонстрации */
  .controls {
    margin-top: 12px;
    font-family: Arial, sans-serif;
  }
  .controls input[type="range"] { width: 220px; }
</style>
</head>
<body>

<h3>Рейтинг со звёздами (пример)</h3>

<div>
  <div class="rating" aria-hidden="false" role="img" aria-label="Рейтинг">
    <!-- Нижний (серый) слой -->
    <div class="stars-row gray" id="stars-gray">
      <!-- 5 одинаковых SVG звезды, используется currentColor -->
      <svg class="star" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 .587l3.668 7.431 8.2 1.191-5.934 5.788 1.402 8.176L12 18.896 4.664 23.173l1.402-8.176L.132 9.209l8.2-1.191L12 .587z"/></svg>
      <svg class="star" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 .587l3.668 7.431 8.2 1.191-5.934 5.788 1.402 8.176L12 18.896 4.664 23.173l1.402-8.176L.132 9.209l8.2-1.191L12 .587z"/></svg>
      <svg class="star" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 .587l3.668 7.431 8.2 1.191-5.934 5.788 1.402 8.176L12 18.896 4.664 23.173l1.402-8.176L.132 9.209l8.2-1.191L12 .587z"/></svg>
      <svg class="star" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 .587l3.668 7.431 8.2 1.191-5.934 5.788 1.402 8.176L12 18.896 4.664 23.173l1.402-8.176L.132 9.209l8.2-1.191L12 .587z"/></svg>
      <svg class="star" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 .587l3.668 7.431 8.2 1.191-5.934 5.788 1.402 8.176L12 18.896 4.664 23.173l1.402-8.176L.132 9.209l8.2-1.191L12 .587z"/></svg>
    </div>

    <!-- Верхний (жёлтый) слой — ширина будет меняться в JS -->
    <div class="stars-row gold" id="stars-gold" style="width:0%">
      <svg class="star" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 .587l3.668 7.431 8.2 1.191-5.934 5.788 1.402 8.176L12 18.896 4.664 23.173l1.402-8.176L.132 9.209l8.2-1.191L12 .587z"/></svg>
      <svg class="star" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 .587l3.668 7.431 8.2 1.191-5.934 5.788 1.402 8.176L12 18.896 4.664 23.173l1.402-8.176L.132 9.209l8.2-1.191L12 .587z"/></svg>
      <svg class="star" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 .587l3.668 7.431 8.2 1.191-5.934 5.788 1.402 8.176L12 18.896 4.664 23.173l1.402-8.176L.132 9.209l8.2-1.191L12 .587z"/></svg>
      <svg class="star" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 .587l3.668 7.431 8.2 1.191-5.934 5.788 1.402 8.176L12 18.896 4.664 23.173l1.402-8.176L.132 9.209l8.2-1.191L12 .587z"/></svg>
      <svg class="star" viewBox="0 0 24 24" aria-hidden="true"><path d="M12 .587l3.668 7.431 8.2 1.191-5.934 5.788 1.402 8.176L12 18.896 4.664 23.173l1.402-8.176L.132 9.209l8.2-1.191L12 .587z"/></svg>
    </div>
  </div>

  <span class="rating-value" id="ratingValue">0.0</span>
</div>

<div class="controls">
  <label>Показать рейтинг: <span id="demoVal">3.8</span></label><br>
  <input id="ratingRange" type="range" min="0" max="5" step="0.1" value="3.8">
  <button id="setBtn">Установить 3.8</button>
</div>

<script>
  // Установить рейтинг (0..5). Делает резкое обрезание сверху.
  function setRating(r) {
    r = Number(r);
    if (isNaN(r)) r = 0;
    r = Math.max(0, Math.min(5, r));
    const percent = (r / 5) * 100; // ширина залитого слоя в %
    const gold = document.getElementById('stars-gold');
    gold.style.width = percent + '%';
    document.getElementById('ratingValue').textContent = r.toFixed(1);
  }

  // демонстрация слайдером
  const range = document.getElementById('ratingRange');
  const demoVal = document.getElementById('demoVal');
  range.addEventListener('input', (e) => {
    demoVal.textContent = e.target.value;
    setRating(e.target.value);
  });

  // кнопка установить 3.8
  document.getElementById('setBtn').addEventListener('click', () => setRating(3.8));

  // начальное значение
  setRating(3.8);
</script>

</body>
</html>